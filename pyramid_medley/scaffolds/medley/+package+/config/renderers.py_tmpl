import functools

from webhelpers2.text import plural

from ..lib.filters import jsonify

def includeme(config):
    # if variable is None print '' instead of 'None'
    def _silent_none(value):
        if value is None:
            return ''
        return value

    env = config.get_jinja2_environment()
    env.finalize = _silent_none

    env.filters['plural'] = plural
    env.filters['jsonify'] = jsonify
